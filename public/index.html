<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <div id="head" > </div>
    <div id="player-role" > </div>
    <div id="endowment"> </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
    var socket = io.connect('http://localhost:9000', { 'forceNew': true });

      socket.on('info', function (data) {
        console.log('info')
        renderInfo(data)
      })

      socket.on('role_assignment', function(data) {
        if(data.isDictator){
          document.getElementById('player-role').innerHTML=`
            <p id="role-message">You are the Dictator</p>
            <p>How much do you want to keep? <input name="keep" type="number" /></p>
             <button onClick="endow()">Submit</button>`
        } else {
          document.getElementById('player-role').innerHTML=`<p id="role-message">You are a player, wait for the Dictator's endowment.</p>`

        }
      })

      socket.on('endowment', function(data){
        document.getElementById('endowment').innerHTML=`
        <p id="endowment-amount">The dictator endowed ${data}</p>
        <p>Do you accept or reject?
          <select name="choice">
          <option value='a'> Accept </option>
          <option value='r'> Reject </option>
          </select>
         <button onClick="choose()">Submit</button>`
      })
      function endow(){
        console.log(document.getElementsByName('keep')[0].value)
        socket.emit('endow',document.getElementsByName('keep')[0].value)
      }
      function renderInfo(data){
        console.log(data)
        document.getElementById('head').innerHTML=`<p id="infoMessage">${data.info}</p>`

      }
    </script>
  </body>
</html>
